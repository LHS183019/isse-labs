:root{
  --bg:#f2f5f8;
  --card:#ffffff;
  --muted:#6b7280;
  --primary:#0a84ff; /* iOS 蓝 */
  --danger:#ff3b30;
  --glass: rgba(255,255,255,0.6);
  --control-height:44px;
}

*{box-sizing:border-box}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:linear-gradient(180deg,var(--bg), #eef3f7);
  color:#111;
  margin:0;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.container{
  max-width:820px;
  margin:32px auto;
  padding:22px;
  background:var(--card);
  border-radius:16px;
  box-shadow: 0 8px 30px rgba(16,24,40,0.08);
}

.topbar h1{margin:0;font-size:20px;font-weight:600}
.topbar .subtitle{font-size:13px;color:var(--muted);margin-top:6px}

.toolbar{display:flex;justify-content:space-between;align-items:center;gap:12px}
.add-form{display:flex;gap:10px;margin:16px 0 12px;align-items:center}
.add-form input[type="text"], .add-form select{
  padding:10px 12px;border-radius:10px;border:1px solid #e6e9ef;background: linear-gradient(180deg, rgba(250,250,250,0.9), rgba(245,245,248,0.9));
  min-width:0;outline:none;transition: box-shadow .12s, transform .08s;
}
.add-form input[type="text"]:focus, .add-form select:focus{
  box-shadow: 0 4px 10px rgba(10,132,255,0.12);
  transform: translateY(-1px);
  border-color: rgba(10,132,255,0.28);
}
.add-form input[type="text"]{flex:1}

.btn{
  appearance:none;border:0;padding:9px 12px;border-radius:10px;cursor:pointer;background:transparent;transition: transform .08s, box-shadow .08s, opacity .12s;font-weight:600;
}
.btn:hover{transform: translateY(-1px)}
.btn:active{transform: translateY(0)}
.btn:disabled{opacity:.6;cursor:not-allowed}

.btn.primary{
  color:white;background: linear-gradient(180deg,var(--primary), #0066d6);box-shadow: 0 6px 18px rgba(10,132,255,0.18);
}

.btn.ghost{background: rgba(10,132,255,0.06);color: var(--primary);border: 1px solid rgba(10,132,255,0.08);}

.btn.mini{padding:6px 8px;border-radius:8px;font-size:13px}

.btn.danger{background: linear-gradient(180deg, #ff6b65, var(--danger));color: white;box-shadow: 0 6px 12px rgba(255,59,48,0.12);}

.controls{display:flex;flex-direction:column;gap:10px;margin-bottom:12px}
.filter-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.field{display:flex;flex-direction:column;font-size:12px;color:var(--muted)}
.field .mini{margin-top:6px;padding:8px;border-radius:8px;border:1px solid #eef2f6;background:#fff}

.progress-wrap{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.progress-bar{flex:1;height:12px;background:#eef3f7;border-radius:999px;overflow:hidden;box-shadow: inset 0 1px 0 rgba(255,255,255,0.6)}
.progress-fill{height:100%;width:0;background:linear-gradient(90deg,var(--primary), #66b3ff);transition:width .36s ease}
.progress-text{font-size:13px;color:var(--muted);min-width:160px;text-align:right}

.todo-list{list-style:none;padding:0;margin:0}
.todo-item{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;margin-bottom:8px;background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(250,250,252,0.6));box-shadow:0 4px 10px rgba(16,24,40,0.04)}
.todo-item.done{opacity:.75}
.left{display:flex;gap:12px;align-items:center}
.left .chk{width:18px;height:18px;border-radius:6px;border:1px solid #dfe6ef;background:#fff}
.task{font-size:15px;font-weight:500}
.meta{font-size:12px;color:var(--muted);margin-top:4px}

.right{display:flex;gap:8px;align-items:center}

/* 警示图标 */
.warn-icon{display:inline-block;width:20px;height:20px;line-height:20px;text-align:center;border-radius:50%;margin-right:8px;font-size:12px;vertical-align:middle;box-shadow:0 2px 6px rgba(0,0,0,0.06)}
.warn-icon.overdue{background: rgba(255,59,48,0.12); color: var(--danger); border:1px solid rgba(255,59,48,0.18)}
.warn-icon.near{background: rgba(255,199,0,0.12); color:#b36b00; border:1px solid rgba(255,199,0,0.18)}
.task{display:flex;align-items:center;gap:6px}

/* 统一控件高度（便于对齐） */
.filter-row .mini, .filter-row .btn, .filter-row select, .filter-row input,
.btn, .btn.mini, .todo-item .right .btn { height: var(--control-height); min-height:var(--control-height); display:inline-flex; align-items:center; padding:8px 12px; box-sizing:border-box; border-radius:10px; }

/* date 控件样式与文本框一致，内部占位颜色与任务占位保持一致 */
.modal-body input[type="date"]{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid #e6e9ef; background:#fff; outline:none; transition:box-shadow .12s; color:var(--muted); font-weight:400;
}
.modal-body input[type="date"]::-webkit-datetime-edit,
.modal-body input[type="date"]::-webkit-datetime-edit-field,
.modal-body input[type="date"]::-webkit-datetime-edit-month-field,
.modal-body input[type="date"]::-webkit-datetime-edit-day-field,
.modal-body input[type="date"]::-webkit-datetime-edit-year-field{ color:var(--muted); font-weight:400 }
.modal-body input[type="date"]::-webkit-calendar-picker-indicator{ cursor:pointer; filter:none }

/* 右侧按钮容器垂直居中 */
.todo-item .right{ display:flex; gap:8px; align-items:center; justify-content:flex-end }

.empty{text-align:center;color:var(--muted);padding:18px;border-radius:8px;background:#fafbfd}

/* modal 共用样式 */
.modal{
  position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .18s;
  background: rgba(12,18,28,0.26);
  z-index:1000;
}
.modal.open{opacity:1;pointer-events:auto}
.modal-dialog{
  background:var(--card);border-radius:14px;padding:18px;min-width:320px;max-width:560px;box-shadow:0 12px 40px rgba(16,24,40,0.16);
  transform: translateY(6px);
}
.modal-dialog.small{max-width:360px}
.modal-header h3{margin:0;font-size:17px}
.modal-body{display:flex;flex-direction:column;gap:10px;margin-top:8px}
.modal-body label{display:flex;flex-direction:column;font-size:13px;color:#222}
.modal-body input[type="text"], .modal-body select{
  padding:10px;border-radius:10px;border:1px solid #e6e9ef;background:#fff;outline:none;
  transition: box-shadow .12s;
}
.modal-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:8px}

/* toast */
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:36px;background:rgba(18,18,18,0.92);color:#fff;padding:10px 14px;border-radius:10px;font-size:13px;opacity:0;transition:opacity .18s;z-index:999}
.toast.visible{opacity:1}

/* 统一表单输入样式：供 text/select/date/new-category 使用 */
.modal-body .form-input,
.modal-body input[type="text"],
.modal-body select {
  padding:10px 12px;
  border-radius:10px;
  border:1px solid #e6e9ef;
  background:#fff;
  outline:none;
  transition: box-shadow .12s;
  width:100%;
  box-sizing:border-box;
  color: var(--muted);     /* 与占位/说明文字色一致 */
  font-weight:400;
}

/* 确保 date 内部字段在 WebKit 中颜色、权重与其它输入一致 */
.modal-body input[type="date"]::-webkit-datetime-edit,
.modal-body input[type="date"]::-webkit-datetime-edit-field,
.modal-body input[type="date"]::-webkit-datetime-edit-month-field,
.modal-body input[type="date"]::-webkit-datetime-edit-day-field,
.modal-body input[type="date"]::-webkit-datetime-edit-year-field{
  color: var(--muted);
  font-weight: 400;
}

/* 取消对 date 的特殊 max-width（若之前有） */
.modal-body input[type="date"]{
  max-width: none;
}